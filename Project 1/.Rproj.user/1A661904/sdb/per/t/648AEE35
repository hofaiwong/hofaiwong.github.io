{
    "collab_server" : "",
    "contents" : "#ggmap\n# library(ggmap)\n\n######MIssing zip codes: ] 10065 10075 10057 10317\n\n# zips = read.csv('zipcode.csv', header=T, stringsAsFactors = F) %>%\n#   rename(., zipcode=zip)\n# latest2 = left_join(latest[latest$boro!= 'Missing',], zips, by='zipcode') %>%\n#   select(., longitude, latitude, score)\n# latest_neg = latest2[latest2$score<=0,]\n# latest_pos = latest2[latest2$score>0,]\n# latest3 = latest_pos[rep(row.names(latest_pos), latest_pos$score), ]\n# latest_combined = rbind(latest_neg,latest_pos)\n# latest_combined = latest_combined[,c('longitude','latitude')]\n# \n# # \n# # qmplot(longitude, latitude, data = latest2, source='google')\n# \n# m <- get_map(\"New York City\", zoom = 12, source=\"stamen\")\n# \n# # ggmap(m, base_layer = ggplot(aes(x = longitude, y = latitude, size = score), data = latest2))  + \n# #   geom_point(color=\"red\",alpha=0.2) + \n# #   scale_fill_gradient(low = \"yellow\", high = \"red\")\n# #   #stat_density2d(aes(x = latest2$longitude, y = latest2$latitude, fill=..level..), data=latest2,geom=\"polygon\", alpha=0.2)\n# \n# \n# ggmap(m) + \n#   #geom_point(aes(x=latest2$longitude, y=latest2$latitude), colour = 'red', alpha = 0.1, data = latest2)\n#   geom_density2d(data = latest_combined, aes(x = longitude, y = latitude), size = 0.3) +\n#   stat_density2d(data = latest_combined, aes(x = longitude, y = latitude, fill = ..level.., alpha = ..level..),  geom = \"polygon\") + \n#   scale_fill_gradient(low = \"green\", high = \"red\") + \n#   scale_alpha(range = c(0, 0.3), guide = FALSE)\n\n\n\n###########################\n## Using choroplethr zip ##\n###########################\n\n# install.packages(\"devtools\")\nlibrary(devtools)\ninstall_github('arilamstein/choroplethrZip@v1.5.0')\nlibrary(choroplethr)\nlibrary(choroplethrZip)\nlibrary(dplyr)\nlibrary(zipcode)\ndata(zip.regions)\n\navgbyzip = latest %>% \n  group_by(., zipcode) %>%\n  summarise(., mean(score))\n\ncolnames(avgbyzip) = c('region','value')\navgbyzip$region = clean.zipcodes(avgbyzip$region)\nscored_zips = unique(avgbyzip$region)\nmissing_zips = c('10048','10055', '10057', '10104', '10105', '10106', '10107', '10118', '10121', '10123', '10155', '10166', '10175', '10176', '10178', '10179', '10281', '10285', '10317', '11242', '11249', '11256', '11352')\nadjusted_zips = scored_zips[!(scored_zips %in% missing_zips)]\n\nzip_choropleth(avgbyzip, \n               msa_zoom = \"New York-Newark-Jersey City, NY-NJ-PA\",\n               zip_zoom = adjusted_zips,\n               title=\"NYC latest restaurant inspection score averages\",\n               legend=\"Average scores\")\n\n\nlatest_short = latest[latest$zipcode %in% missing_zips,]\ndim(latest_short)\n",
    "created" : 1461012418694.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "679127160",
    "id" : "648AEE35",
    "lastKnownWriteTime" : 1461092751,
    "last_content_update" : 1461092751158,
    "path" : "~/Desktop/Project 1/Map.R",
    "project_path" : "Map.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}